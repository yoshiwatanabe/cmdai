# CmdAI Quick Setup Guide

Complete setup from zero to working CmdAI installation with Azure OpenAI + Ollama fallback.

## ðŸŽ¯ Goal
By the end of this guide, you'll have:
- CmdAI installed globally on your machine
- Azure OpenAI configured for powerful remote AI
- Ollama configured for local private AI fallback
- Smart priority: Azure OpenAI â†’ Ollama â†’ Patterns

---

## Step 1: Install .NET 8.0

### Windows
```bash
winget install Microsoft.DotNet.SDK.8
```

### macOS
```bash
brew install dotnet
```

### Linux (Ubuntu/Debian)
```bash
wget https://packages.microsoft.com/config/ubuntu/22.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
sudo apt update && sudo apt install dotnet-sdk-8.0
```

### Verify
```bash
dotnet --version  # Should show 8.0.x
```

---

## Step 2: Install CmdAI

1. **Download package**: 
   - Go to [GitHub Releases](https://github.com/yoshiwatanabe/cmdai/releases/latest)
   - Download the latest `CmdAi.Cli.*.nupkg` file

2. **Install globally**:
   ```bash
   cd ~/Downloads  # or wherever you downloaded
   dotnet tool install --global --add-source . CmdAi.Cli
   ```

3. **Test installation**:
   ```bash
   cmdai version
   # Output: CmdAI - AI-Powered CLI Assistant v1.x.x
   ```

---

## Step 3: Configure Azure OpenAI (Primary AI)

1. **Download configuration template**:
   - Go to [.env.example](https://raw.githubusercontent.com/yoshiwatanabe/cmdai/main/.env.example)  
   - Right-click â†’ "Save As" â†’ Save as `.env` in your home directory
   - Location: `C:\Users\YourName\.env` (Windows) or `~/.env` (Mac/Linux)

2. **Edit `.env` file** with your Azure OpenAI details:
   ```bash
   # Replace with your actual values:
   AI__AzureOpenAIApiKey=sk-your-actual-api-key-here
   AI__AzureOpenAIEndpoint=https://your-resource.openai.azure.com/openai/deployments/gpt-4/chat/completions?api-version=2025-01-01-preview
   AI__Providers__0=azureopenai
   AI__Providers__1=ollama
   ```

3. **Test Azure OpenAI**:
   ```bash
   cmdai git "show current status"
   # Should show: "Generated by model-router" or your model name
   ```

---

## Step 4: Install Ollama (Local AI Fallback)

1. **Install Ollama**:
   ```bash
   curl -fsSL https://ollama.ai/install.sh | sh
   ```

2. **Download CodeLlama model** (~4GB):
   ```bash
   ollama pull codellama:7b
   ```

3. **Start Ollama service**:
   ```bash
   ollama serve  # Keep this running
   ```

4. **Test Ollama** (in new terminal):
   ```bash
   # Temporarily disable Azure OpenAI to test Ollama
   cmdai git "show current status"
   # Should show: "Generated by codellama:7b"
   ```

---

## Step 5: Verify Complete Setup

1. **Test priority system**:
   ```bash
   # With Azure OpenAI configured, this should use Azure first
   cmdai git "delete untracked files"
   # Output: "Generated by model-router" (Azure OpenAI)
   ```

2. **Test different tools**:
   ```bash
   cmdai az "list subscriptions"
   cmdai docker "show running containers"
   cmdai kubectl "get pods"
   ```

3. **Test fallback** (stop Ollama to test patterns):
   ```bash
   # Stop ollama service
   pkill ollama
   
   # Should still work with patterns
   cmdai git "show status"
   # Output: "Pattern-based git command"
   ```

---

## ðŸŽ‰ You're Done!

CmdAI will now intelligently choose the best AI provider:
1. **Azure OpenAI** (if configured) - Most powerful
2. **Ollama** (if running) - Private and local
3. **Patterns** (always works) - Reliable fallback

Use `cmdai` from anywhere on your system!

---

## ðŸ†˜ Common Issues

**Tool not found after install?**
```bash
export PATH="$PATH:$HOME/.dotnet/tools"
# Add to ~/.bashrc or ~/.zshrc
```

**Azure OpenAI not working?**
- Check API key and endpoint in `.env`
- Ensure you're running `cmdai` from directory with `.env`

**Ollama not working?**
```bash
# Check if running
curl http://localhost:11434/api/tags
```